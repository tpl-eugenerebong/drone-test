kind: pipeline
type: kubernetes
name: default

platform:
  os: linux
  arch: arm64

metadata:
  namespace: default

steps:
- name: tester
  image: node  
  commands:
  - npm install
  - npm test
- name: docker
  image: docker:latest
  volumes:
    - name: docker_sock
      path: /var/run/docker.sock
  commands:
  - ls
  - dockerd
  - docker build -t tpleugenerebong/deploy-test:develop .
  - docker push tpleugenerebong/deploy-test:develop

trigger:
  branch:
    include:
    - master
    - develop
    - feature/*